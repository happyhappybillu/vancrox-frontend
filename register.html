<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register â€¢ VANCROX</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./auth.css"/>
</head>
<body>

  <div class="bg-orbs"></div>
  <div class="bg-grid"></div>
  <div id="particles"></div>

  <header class="nav">
    <div class="brand">
      <img src="./assets/logo.png" class="brand-logo" alt="VANCROX Logo">
      <span class="brand-name">VANCROX</span>
    </div>
    <div class="nav-actions">
      <a class="btn btn-ghost" href="./index.html">Home</a>
      <a class="btn btn-primary" href="./login.html">Login</a>
    </div>
  </header>

  <main class="auth-wrap">
    <section class="auth-card">
      <div class="auth-inner">
        <div class="auth-title">Create Account</div>
        <div class="auth-sub">Choose account type and start securely.</div>

        <div id="msg" class="msg"></div>

        <form id="registerForm" class="form">
          <div class="field">
            <label>Account Type</label>
            <select id="role" required>
              <option value="investor">Investor</option>
              <option value="trader">Trader</option>
            </select>
          </div>

          <div class="field">
            <label>Full Name</label>
            <input id="name" type="text" placeholder="Enter full name" required />
          </div>

          <div class="field">
            <label>Email / Mobile</label>
            <input id="email" type="text" placeholder="Enter email or mobile" required />
          </div>

          <div class="field">
            <label>Password</label>
            <input id="password" type="password" placeholder="Create password" required />
          </div>

          <div class="row">
            <button class="btn btn-primary" type="submit">Register</button>
            <a class="btn btn-ghost" href="./login.html">Login</a>
          </div>

          <div class="small-links">
            <a href="./index.html#security">Security</a>
            <a href="./index.html#how-it-works">How it works</a>
          </div>
        </form>
      </div>
    </section>
  </main>

  <script src="./auth.js"></script>
<script>
const API_BASE = "https://vancrox-backend.onrender.com";

const form = document.getElementById("registerForm");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const role = document.getElementById("role").value; // investor / trader
  const name = document.getElementById("name").value.trim();
  const contact = document.getElementById("contact").value.trim();
  const password = document.getElementById("password").value;

  if(!role || !name || !contact || !password){
    return alert("Invalid details. Please check and try again.");
  }

  try{
    const res = await fetch(`${API_BASE}/api/auth/register`, {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({ role, name, contact, password })
    });

    const data = await res.json();

    if(!res.ok){
      return alert(data.message || "Registration failed. Try again.");
    }

    alert(`Registration successful! Your ID: ${data.userId}`);
    window.location.href = "./login.html";
  }
  catch(err){
    console.log(err);
    alert("Server not reachable. Please try again.");
  }
});
</script>

</body>
</html>
