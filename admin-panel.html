<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>System Control Panel â€¢ VANCROX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="./admin.css"/>
</head>

<body>

<!-- ================= TOP BAR ================= -->
<header class="sys-topbar">
  <div class="sys-brand">
    <div class="logo">V</div>
    <div>
      <div class="sys-name">VANCROX</div>
      <div class="sys-tag">System Control Panel</div>
    </div>
  </div>

  <div class="sys-user">
    <div class="sys-role">System Team</div>
    <button class="btn-logout" onclick="logout()">Logout</button>
  </div>
</header>

<!-- ================= LAYOUT ================= -->
<div class="sys-layout">

  <!-- ========== SIDEBAR ========== -->
  <aside class="sys-sidebar">

    <button class="nav-item active" onclick="go('overview', this)">Overview</button>

    <div class="nav-title">User Management</div>
    <button class="nav-item" onclick="go('investors', this)">Investors</button>
    <button class="nav-item" onclick="go('traders', this)">Traders</button>

    <div class="nav-title">Operations</div>
    <button class="nav-item" onclick="go('pending', this)">Pending Approvals</button>
    <button class="nav-item" onclick="go('notifications', this)">Notifications</button>
    <button class="nav-item" onclick="go('support', this)">Support Tickets</button>

    <div class="nav-title">System</div>
    <button class="nav-item" onclick="go('addresses', this)">Address Change</button>
    <button class="nav-item" onclick="go('reports', this)">Reports</button>

    <button class="nav-item danger" onclick="logout()">Logout</button>

  </aside>

  <!-- ========== CONTENT ========== -->
  <main class="sys-content" id="screen">

    <!-- ================= OVERVIEW ================= -->
    <section id="view-overview" class="view active">
      <h2>System Overview</h2>

      <div class="stat-grid">
        <div class="stat-card">
          <div class="stat-label">Total Investors</div>
          <div class="stat-value" id="statInvestors">0</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Total Traders</div>
          <div class="stat-value" id="statTraders">0</div>
        </div>

        <div class="stat-card warning">
          <div class="stat-label">Pending Requests</div>
          <div class="stat-value" id="statPending">0</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Total Deposits</div>
          <div class="stat-value" id="statDeposits">$0</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Total Withdrawals</div>
          <div class="stat-value" id="statWithdraw">$0</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Open Tickets</div>
          <div class="stat-value" id="statTickets">0</div>
        </div>
      </div>
    </section>

    <!-- ================= INVESTORS ================= -->
    <section id="view-investors" class="view">
      <h2>Investors</h2>

      <table class="sys-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>UID</th>
            <th>Email</th>
            <th>Balance</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="investorList"></tbody>
      </table>
    </section>

    <!-- ================= TRADERS ================= -->
    <section id="view-traders" class="view">
      <h2>Traders</h2>

      <table class="sys-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>TID</th>
            <th>Email</th>
            <th>Verification</th>
            <th>Security</th>
            <th>Earning</th>
            <th>Level</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="traderList"></tbody>
      </table>
    </section>

    <!-- ================= PENDING ================= -->
    <section id="view-pending" class="view">
      <h2>Pending Approvals</h2>

      <table class="sys-table">
        <thead>
          <tr>
            <th>User</th>
            <th>ID</th>
            <th>Role</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Date</th>
            <th>View</th>
          </tr>
        </thead>
        <tbody id="pendingList"></tbody>
      </table>
    </section>

    <!-- ================= NOTIFICATIONS ================= -->
    <section id="view-notifications" class="view">
      <h2>Send Notification (Investors)</h2>

      <div class="form-card">
        <label>Title</label>
        <input type="text" id="nTitle"/>

        <label>Message</label>
        <textarea id="nMsg"></textarea>

        <label>Image (optional)</label>
        <input type="file" id="nImg"/>

        <button class="btn" onclick="sendNotification()">Send</button>
      </div>
    </section>

    <!-- ================= SUPPORT ================= -->
    <section id="view-support" class="view">
      <h2>Support Tickets</h2>

      <table class="sys-table">
        <thead>
          <tr>
            <th>User</th>
            <th>ID</th>
            <th>Role</th>
            <th>Message</th>
            <th>Time</th>
            <th>View</th>
          </tr>
        </thead>
        <tbody id="ticketList"></tbody>
      </table>
    </section>

    <!-- ================= ADDRESSES ================= -->
    <section id="view-addresses" class="view">
      <h2>System Wallet Addresses</h2>

      <div class="form-card">
        <label>ERC20</label>
        <input id="addrErc"/>

        <label>TRC20</label>
        <input id="addrTrc"/>

        <label>BEP20</label>
        <input id="addrBep"/>

        <button class="btn" onclick="saveAddresses()">Save</button>
      </div>
    </section>

    <!-- ================= REPORTS ================= -->
    <section id="view-reports" class="view">
      <h2>Reports & History</h2>
      <div class="empty">Read-only reports will appear here.</div>
    </section>

  </main>
</div>

<!-- ================= NAVIGATION SCRIPT ================= -->
<script>
function go(view, el){
  document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
  document.querySelectorAll(".nav-item").forEach(b => b.classList.remove("active"));

  const target = document.getElementById("view-" + view);
  if (target) target.classList.add("active");

  if (el) el.classList.add("active");
}

function logout(){
  localStorage.removeItem("vancrox_auth");
  location.href = "./login.html";
}
</script>

<!-- ================= AUTH ================= -->
<script src="./auth.js"></script>
<script>requireAuth("admin");</script>

<!-- ================= ADMIN LOGIC ================= -->
<script src="./admin.js"></script>

</body>
</html>